clc;clear; close all;%-----------参数设置-----------%最大遗传代数MAXGEN = 200; %种群大小sizepop = 40; %每个变量的二进制长度lenchrom = [20 20];trace= zeros(1,MAXGEN);%----------------------------------------------%最佳个体,记录其适应度值、十进制值、二迸制编码、量子比特编码 best = struct('fitness',0,'X',[],'binary',[],'chrom',[]);%% 初始化种群chrom = InitPop(sizepop * 2,sum(lenchrom));%% 对种群施一次测量,得到二进制编码 binary= collapse(chrom);%% 求种群个体的适应度值和对应的十J制值 % 使用目标函数计算适应度[fitness, X] = FitnessFunction(binary,lenchrom);	%% 记录最佳个体到best % 找出极大值[best.fitness, bestindex] = max( fitness) ;	best.binary = binary(bestindex,:);best.chrom = chrom([2*bestindex-1 : 2 * bestindex],:);best. X = X(bestindex,:); trace(1) = best.fitness; fprintf( '%d\n',1);for gen = 2 : MAXGEN	% 提示进化代数	fprintf('%d\n',gen)		%% 对种群实施一次测	binary = collapse(chrom);	%% 计箅适应度	[fitness,X] = FitnessFunction(binary,lenchrom);	%% 量子旋转门 	chrom = Qgate(chrom,fitness,best,binary);	% 找到最佳值 	[newbestfitness,newbestindex] = max(fitness); 	%记录域佳个体到best 	if newbestfitness>best.fitness 		best.fitness = newbestfitness; 		best.binary = binary(newbestindex,:);		best.chrom = chrom([2*newbestindex-1:2*newbestindex],:);		best. X = X(newbestindex,:);	end	trace(gen) = best.fitness;end%%画进化曲线 plot(1:MAXGEN,trace); title('进化过程');xlabel('进化代数');ylabel('每代的最佳适应度');%%显示优化结果 disp(['最优解 X:',num2str(best. X)]); disp(['最大值 Y:',num2str(best. fitness)]);