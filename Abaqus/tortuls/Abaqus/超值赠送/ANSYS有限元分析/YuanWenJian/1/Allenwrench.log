/BATCH  
/COM,ANSYS RELEASE 17.0    UP20131014       16:20:16    10/20/2016
/FILNAME,Allenwrench,1  
/BATCH  
/COM,ANSYS RELEASE 17.0    UP20131014       16:20:39    10/20/2016
/TITLE,Static Analysis of an Allen Wrench   
/UNITS,SI   
*AFUN,DEG   
*SET,EXX,2.07e11
*SET,W_HEX,0.01 
*SET,W_FLAT,0.0058  
*SET,L_SHANK,0.075  
*SET,L_HANDLE,0.2   
*SET,BENDRAD,0.01   
*SET,L_ELEM,0.0075  
*SET,NO_D_HEX,2 
*SET,TOL,25E-6  
/PREP7  
!*  
ET,1,SOLID185   
!*  
KEYOPT,1,2,3
KEYOPT,1,3,0
KEYOPT,1,6,0
!*  
ET,2,PLANE182   
!*  
KEYOPT,2,1,3
KEYOPT,2,3,0
KEYOPT,2,6,0
!*  
!*  
MPTEMP,,,,,,,,  
MPTEMP,1,0  
MPDATA,EX,1,,EXX
MPDATA,PRXY,1,,0.3  
RPOLY,6,W_FLAT, 
K,7,,,, 
K,8,,,-L_SHANK, 
K,9,,L_HANDLE,-L_SHANK, 
/PLOPTS,INFO,3  
/PLOPTS,LEG1,1  
/PLOPTS,LEG2,1  
/PLOPTS,LEG3,1  
/PLOPTS,FRAME,1 
/PLOPTS,TITLE,1 
/PLOPTS,MINM,1  
/PLOPTS,FILE,0  
/PLOPTS,LOGO,1  
/PLOPTS,WINS,1  
/PLOPTS,WP,0
/PLOPTS,DATE,2  
/TRIAD,LTOP 
/REPLOT 
!*  
/VIEW, 1 ,1,1,1 
/ANG, 1 
/REP,FAST   
!*  
/ANGLE,1,90,XM,0
/REPLOT 
!*  
LSTR,       4,       1  
LSTR,       7,       8  
LSTR,       8,       9  
!*  
LFILLT,8,9,BENDRAD, ,   
/PNUM,KP,0  
/PNUM,LINE,1
/PNUM,AREA,0
/PNUM,VOLU,0
/PNUM,NODE,0
/PNUM,TABN,0
/PNUM,SVAL,0
/NUMBER,0   
!*  
/PNUM,ELEM,0
/REPLOT 
!*  
APLOT   
FLST,2,1,5,ORDE,1   
FITEM,2,1   
LPLOT   
FLST,3,1,4,ORDE,1   
FITEM,3,7   
ASBL,P51X,P51X, , ,KEEP 
CM,BOTAREA,AREA 
FLST,5,3,4,ORDE,3   
FITEM,5,1   
FITEM,5,-2  
FITEM,5,6   
CM,_Y,LINE  
LSEL, , , ,P51X 
CM,_Y1,LINE 
CMSEL,,_Y   
!*  
LESIZE,_Y1, , ,NO_D_HEX, , , , ,1   
!*  
TYPE,   2   
MAT,       1
REAL,   
ESYS,       0   
SECNUM, 
TSHAP,LINE  
!*  
MOPT,AMESH,DEFA 
MOPT,QMESH,DEFA 
MOPT,VMESH,DEFA 
MOPT,TIMP,1 
MOPT,PYRA,ON
MOPT,AORD,0 
MOPT,SPLIT,1
MSHKEY,1
MSHMID,0
MSHPATTERN,0
KEYW,ACCEPT,0   
!*  
MSHAPE,0,2D 
MSHAPE,0,3D 
!*  
FLST,5,2,5,ORDE,2   
FITEM,5,2   
FITEM,5,-3  
CM,_Y,AREA  
ASEL, , , ,P51X 
CM,_Y1,AREA 
CHKMSH,'AREA'   
CMSEL,S,_Y  
!*  
AMESH,_Y1   
!*  
CMDELE,_Y   
CMDELE,_Y1  
CMDELE,_Y2  
!*  
TYPE,   1   
MAT,       1
REAL,   
ESYS,       0   
SECNUM, 
TSHAP,LINE  
!*  
TYPE,   1   
MAT,       1
REAL,   
ESYS,       0   
SECNUM, 
TSHAP,LINE  
!*  
ESIZE,L_ELEM,0, 
/PNUM,KP,0  
/PNUM,LINE,1
/PNUM,AREA,0
/PNUM,VOLU,0
/PNUM,NODE,0
/PNUM,TABN,0
/PNUM,SVAL,0
/NUMBER,0   
!*  
/PNUM,ELEM,0
/REPLOT 
!*  
LPLOT   
FLST,2,2,5,ORDE,2   
FITEM,2,2   
FITEM,2,-3  
FLST,8,3,4  
FITEM,8,8   
FITEM,8,10  
FITEM,8,9   
VDRAG,P51X, , , , , ,P51X   
EPLOT   
SAVE
CMSEL,S,BOTAREA 
FLST,2,2,5,ORDE,2   
FITEM,2,2   
FITEM,2,-3  
ACLEAR,P51X 
ALLSEL,ALL  
EPLOT   
CMSEL,S,BOTAREA 
LSEL,S,EXT  
NSLL,S,1
FINISH  
/SOL
FLST,2,18,1,ORDE,4  
FITEM,2,1   
FITEM,2,-10 
FITEM,2,17  
FITEM,2,-24 
!*  
/GO 
D,P51X, , , , , ,ALL, , , , ,   
LSEL,ALL
!*  
/PSF,PRES,NORM,2,0,1
/PBF,DEFA, ,1   
/PSYMB,CS,0 
/PSYMB,NDIR,0   
/PSYMB,ESYS,0   
/PSYMB,LDIV,0   
/PSYMB,LDIR,0   
/PSYMB,ADIR,0   
/PSYMB,ECON,0   
/PSYMB,XNODE,0  
/PSYMB,DOT,1
/PSYMB,PCONV,   
/PSYMB,LAYR,0   
/PSYMB,FBCS,0   
!*  
/PBC,ALL,,1 
/PBC,NFOR,,0
/PBC,NMOM,,0
/PBC,RFOR,,0
/PBC,RMOM,,0
/PBC,PATH,,0
/REP
!*  
ASEL,S,LOC,Y,BENDRAD,L_HANDLE   
ASEL,R,LOC,X,W_FLAT/2,W_FLAT
NSLA,S,1
NSEL,R,LOC,Y,L_HANDLE+TOL,L_HANDLE-(3.0*L_ELEM)-TOL 
!*  
*GET,minyval,NODE,,MNLOC,Y, , , ,   
!*  
*GET,maxyval,NODE,,MXLOC,Y, , , ,   
*SET,PTORQ,100/(W_HEX*(MAXYVAL-MINYVAL))
FLST,2,28,1,ORDE,19 
FITEM,2,365 
FITEM,2,-368
FITEM,2,403 
FITEM,2,-405
FITEM,2,428 
FITEM,2,-430
FITEM,2,503 
FITEM,2,-505
FITEM,2,528 
FITEM,2,-530
FITEM,2,784 
FITEM,2,787 
FITEM,2,-788
FITEM,2,840 
FITEM,2,-842
FITEM,2,965 
FITEM,2,-967
FITEM,2,990 
FITEM,2,-992
/GO 
!*  
SF,P51X,PRES,PTORQ  
ALLSEL,ALL  
NPLOT   
SAVE
LSWRITE,1,  
*SET,PDOWN,20/(W_FLAT*(MAXYVAL-MINYVAL))
ASEL,S,LOC,Z,-(L_SHANK+(W_HEX/2))   
NSLA,S,1
NSEL,S,LOC,X,W_FLAT/2,W_FLAT
NSEL,R,LOC,Y,L_HANDLE+TOL,L_HANDLE-(3.0*L_ELEM)-TOL 
FLST,2,28,1,ORDE,19 
FITEM,2,365 
FITEM,2,-368
FITEM,2,403 
FITEM,2,-405
FITEM,2,428 
FITEM,2,-430
FITEM,2,503 
FITEM,2,-505
FITEM,2,528 
FITEM,2,-530
FITEM,2,784 
FITEM,2,787 
FITEM,2,-788
FITEM,2,840 
FITEM,2,-842
FITEM,2,965 
FITEM,2,-967
FITEM,2,990 
FITEM,2,-992
/GO 
!*  
SF,P51X,PRES,PDOWN  
ALLSEL,ALL  
NPLOT   
SAVE
LSWRITE,2,  
SAVE
LSSOLVE,1,2,1,  
FINISH  
/POST1  
SET,FIRST   
PRRSOL, 
!*  
/PSF,DEFA, ,1,0,1   
/PBF,DEFA, ,1   
/PSYMB,CS,0 
/PSYMB,NDIR,0   
/PSYMB,ESYS,0   
/PSYMB,LDIV,0   
/PSYMB,LDIR,0   
/PSYMB,ADIR,0   
/PSYMB,ECON,0   
/PSYMB,XNODE,0  
/PSYMB,DOT,1
/PSYMB,PCONV,   
/PSYMB,LAYR,0   
/PSYMB,FBCS,0   
!*  
/PBC,ALL, ,0
/REP
!*  
!*  
/EDGE,1,1,45
/GLINE,1,0  
!   
!*  
PLDISP,1
/GSAVE,'pldisp','gsa',' '   
!*  
/ANGLE,1,120,YM,1   
/REPLOT 
!*  
!*  
/EFACET,1   
PLNSOL, S,INT, 0,1.0
/GSAVE,'plnsol','gsa',' '   
SET,NEXT
PRRSOL, 
/GRESUME,'pldisp','gsa',' ' 
PLDISP,1
/GRESUME,'plnsol','gsa',' ' 
!*  
/EFACET,1   
PLNSOL, S,INT, 0,1.0
wpoff,0,0,-0.067
/GRAPHICS,POWER 
!*  
/TYPE,1,5   
/CPLANE,1   
/SHADE,1,1  
/HBC,1,0
/REPLOT 
!*  
/VIEW, 1 ,WP
/REP,FAST   
/DIST, 1 ,0.729000,1
/REP,FAST   
/DIST, 1 ,0.729000,1
/REP,FAST   
/DIST, 1 ,0.729000,1
/REP,FAST   
/DIST, 1 ,0.729000,1
/REP,FAST   
/DIST, 1 ,0.729000,1
/REP,FAST   
/DIST, 1 ,0.729000,1
/REP,FAST   
/DIST, 1 ,0.729000,1
/REP,FAST   
/DIST, 1 ,0.729000,1
/REP,FAST   
/DIST, 1 ,0.729000,1
/REP,FAST   
SAVE
FINISH  
! /EXIT,ALL 
