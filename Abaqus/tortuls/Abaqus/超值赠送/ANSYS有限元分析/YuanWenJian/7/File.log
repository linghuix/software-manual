/BATCH  
/COM,ANSYS RELEASE Release 17.0      BUILD 17.0      UP20151214       14:20:42  
/input,menust,tmp,''
/GRA,POWER  
/GST,ON 
/PLO,INFO,3 
/GRO,CURL,ON
/CPLANE,1   
/REPLOT,RESIZE  
WPSTYLE,,,,,,,,0
/PLOPTS,INFO,3  
/PLOPTS,LEG1,1  
/PLOPTS,LEG2,1  
/PLOPTS,LEG3,1  
/PLOPTS,FRAME,1 
/PLOPTS,TITLE,1 
/PLOPTS,MINM,1  
/PLOPTS,FILE,0  
/PLOPTS,SPNO,0  
/PLOPTS,LOGO,1  
/PLOPTS,WINS,1  
/PLOPTS,WP,0
/PLOPTS,DATE,0  
/TRIAD,ORIG 
/REPLOT 
!*  
/TITLE,Contact Analysis 
/PREP7  
!*  
ET,1,SOLID185   
!*  
!*  
MPTEMP,,,,,,,,  
MPTEMP,1,0  
MPDATA,EX,1,,30e6   
MPDATA,PRXY,1,,0.25 
CYLIND,1.5, ,2.5,4.5,0,360, 
/VIEW, 1 ,1,1,1 
/ANG, 1 
/REP,FAST   
CYLIND,0.45, ,2.5,4.5,0,360,
VSBV,       1,       2  
/REPLOT 
CYLIND,0.5, ,2.0,5,0,360,   
/PNUM,KP,0  
/PNUM,LINE,0
/PNUM,AREA,0
/PNUM,VOLU,1
/PNUM,NODE,0
/PNUM,TABN,0
/PNUM,SVAL,0
/NUMBER,0   
!*  
/PNUM,ELEM,0
/REPLOT 
!*  
/REPLOT 
WPSTYLE,,,,,,,,1
wpstyle,0.05,0.1,-1,1,0.003,0,0,,5  
wpro,,,90.000000
FLST,2,2,6,ORDE,2   
FITEM,2,1   
FITEM,2,3   
VSBW,P51X   
/REPLOT 
SAVE
FLST,2,2,6,ORDE,2   
FITEM,2,2   
FITEM,2,5   
VDELE,P51X, , ,1
wpro,,90.000000,
FLST,2,2,6,ORDE,2   
FITEM,2,4   
FITEM,2,6   
VSBW,P51X   
/REPLOT 
FLST,2,2,6,ORDE,2   
FITEM,2,2   
FITEM,2,5   
VDELE,P51X, , ,1
/REPLOT 
SAVE
WPSTYLE,,,,,,,,0
/PNUM,KP,0  
/PNUM,LINE,1
/PNUM,AREA,0
/PNUM,VOLU,1
/PNUM,NODE,0
/PNUM,TABN,0
/PNUM,SVAL,0
/NUMBER,0   
!*  
/PNUM,ELEM,0
/REPLOT 
!*  
FLST,5,1,4,ORDE,1   
FITEM,5,7   
CM,_Y,LINE  
LSEL, , , ,P51X 
CM,_Y1,LINE 
CMSEL,,_Y   
!*  
LESIZE,_Y1, , ,10, , , , ,1 
!*  
FLST,5,1,4,ORDE,1   
FITEM,5,27  
CM,_Y,LINE  
LSEL, , , ,P51X 
CM,_Y1,LINE 
CMSEL,,_Y   
!*  
LESIZE,_Y1, , ,5, , , , ,1  
!*  
FLST,5,1,4,ORDE,1   
FITEM,5,17  
CM,_Y,LINE  
LSEL, , , ,P51X 
CM,_Y1,LINE 
CMSEL,,_Y   
!*  
LESIZE,_Y1, , ,5, , , , ,1  
!*  
FLST,5,2,6,ORDE,2   
FITEM,5,1   
FITEM,5,3   
CM,_Y,VOLU  
VSEL, , , ,P51X 
CM,_Y1,VOLU 
CHKMSH,'VOLU'   
CMSEL,S,_Y  
!*  
VSWEEP,_Y1  
!*  
CMDELE,_Y   
CMDELE,_Y1  
CMDELE,_Y2  
!*  
!*  
/SHRINK,0   
/ESHAPE,0.0 
/EFACET,2   
/RATIO,1,1,1
/CFORMAT,32,0   
/REPLOT 
!*  
SAVE
!*  
!*  
/COM, CONTACT PAIR CREATION - START 
CM,_NODECM,NODE 
CM,_ELEMCM,ELEM 
CM,_KPCM,KP 
CM,_LINECM,LINE 
CM,_AREACM,AREA 
CM,_VOLUCM,VOLU 
/GSAV,cwz,gsav,,temp
MP,MU,1,0.2 
MAT,1   
MP,EMIS,1,7.88860905221e-031
R,3 
REAL,3  
ET,2,170
ET,3,174
R,3,,,0.1,0.1,0,
RMORE,,,1.0E20,0.0,1.0, 
RMORE,0.0,0,1.0,,1.0,0.5
RMORE,0,1.0,1.0,0.0,,1.0
KEYOPT,3,4,0
KEYOPT,3,5,0
KEYOPT,3,7,0
KEYOPT,3,8,0
KEYOPT,3,9,0
KEYOPT,3,10,2   
KEYOPT,3,11,0   
KEYOPT,3,12,0   
KEYOPT,3,2,0
KEYOPT,2,5,0
! Generate the target surface   
ASEL,S,,,30 
CM,_TARGET,AREA 
TYPE,2  
NSLA,S,1
ESLN,S,0
ESLL,U  
ESEL,U,ENAME,,188,189   
NSLE,A,CT2  
ESURF   
CMSEL,S,_ELEMCM 
! Generate the contact surface  
ASEL,S,,,18 
CM,_CONTACT,AREA
TYPE,3  
NSLA,S,1
ESLN,S,0
NSLE,A,CT2 ! CZMESH patch (fsk qt-40109 8/2008) 
ESURF   
ALLSEL  
ESEL,ALL
ESEL,S,TYPE,,2  
ESEL,A,TYPE,,3  
ESEL,R,REAL,,3  
/PSYMB,ESYS,1   
/PNUM,TYPE,1
/NUM,1  
EPLOT   
ESEL,ALL
ESEL,S,TYPE,,2  
ESEL,A,TYPE,,3  
ESEL,R,REAL,,3  
CMSEL,A,_NODECM 
CMDEL,_NODECM   
CMSEL,A,_ELEMCM 
CMDEL,_ELEMCM   
CMSEL,S,_KPCM   
CMDEL,_KPCM 
CMSEL,S,_LINECM 
CMDEL,_LINECM   
CMSEL,S,_AREACM 
CMDEL,_AREACM   
CMSEL,S,_VOLUCM 
CMDEL,_VOLUCM   
/GRES,cwz,gsav  
CMDEL,_TARGET   
CMDEL,_CONTACT  
/COM, CONTACT PAIR CREATION - END   
/PNUM,KP,0  
/PNUM,LINE,0
/PNUM,AREA,1
/PNUM,VOLU,1
/PNUM,NODE,0
/PNUM,TABN,0
/PNUM,SVAL,0
/NUMBER,0   
!*  
/PNUM,ELEM,0
/REPLOT 
!*  
FINISH  
/SOL
FLST,2,4,5,ORDE,4   
FITEM,2,3   
FITEM,2,-4  
FITEM,2,10  
FITEM,2,24  
DA,P51X,SYMM
FLST,2,1,5,ORDE,1   
FITEM,2,28  
!*  
/GO 
DA,P51X,ALL,
ANTYPE,0
NLGEOM,1
NSUBST,1,0,0
AUTOTS,0
TIME,100
/STATUS,SOLU
SOLVE   
/MREP,EPLOT 
/REPLOT 
NSEL,S,LOC,Z,5  
FLST,2,19,1,ORDE,2  
FITEM,2,40  
FITEM,2,-58 
!*  
!*  
/GO 
D,P51X, ,2.5, , , ,UZ, , , , ,  
NSUBST,100,10000,10 
OUTRES,ERASE
OUTRES,ALL,-10  
AUTOTS,1
TIME,200
ALLSEL,ALL  
/STATUS,SOLU
SOLVE   
FINISH  
!*  
/EXPAND,4,POLAR,HALF,,90
/REPLOT 
!*  
/POST1  
SET,1,LAST,1,   
!*  
/EFACET,1   
PLNSOL, S,EQV, 0,1.0
SET, , ,1, ,120, ,  
ESEL,S,ENAME,,174   
!*  
/EFACET,1   
PLNSOL, CONT,PRES, 0,1.0
SET,2,LAST,1,   
ALLSEL,ALL  
!*  
/EFACET,1   
PLNSOL, S,EQV, 0,1.0
FINISH  
/POST26 
FILE,'Grain','rst','.'  
/UI,COLL,1  
NUMVAR,200  
SOLU,191,NCMIT  
STORE,MERGE 
FILLDATA,191,,,,1,1 
REALVAR,191,191 
!*  
RFORCE,2,30,F,Z, FZ_2   
STORE,MERGE 
XVAR,1  
PLVAR,2,
VARDEL,2
/REPLOT 
ALLSEL,ALL  
/REPLOT 
NUMVAR,200  
FILLDATA,191,,,,1,1 
REALVAR,191,191 
ALLSEL,ALL  
VPLOT   
!*  
RFORCE,2,429,F,Z, FZ_2  
STORE,MERGE 
XVAR,1  
PLVAR,2,
SAVE
FINISH  
! /EXIT,ALL 